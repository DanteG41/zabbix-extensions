UserParameter=elastic.ping,curl -o /dev/null -s -w %{time_total}\\n -XGET "http://127.0.0.1:9200/.marvel-*/_search?pretty=true&q=*:*&size=1&fields=@timestamp"|awk '{gsub(",",".",$1); print $1}'
UserParameter=elastic.memory.use[*],/usr/libexec/zabbix-extensions/scripts/elastic.memory.use.sh $1 $2
UserParameter=elastic.jvm.heap_used,field=jvm.mem.heap_used_in_bytes;curl -sXGET "http://127.0.0.1:9200/.marvel-$(date +%Y.%m.%d)/_search?pretty=true&q=_exists_:$field&size=1&fields=$field" -d '{ "sort": [ { "@timestamp": { "order": "desc" } } ]}'|grep $field|awk '{print $4}'
UserParameter=elastic.jvm.heap_max,field=jvm.mem.heap_max_in_bytes;curl -sXGET "http://127.0.0.1:9200/.marvel-$(date +%Y.%m.%d)/_search?pretty=true&q=_exists_:$field&size=1&fields=$field" -d '{ "sort": [ { "@timestamp": { "order": "desc" } } ]}'|grep $field|awk '{print $4}'
UserParameter=elastic.jvm.heap_committed,field=jvm.mem.heap_committed_in_bytes;curl -sXGET "http://127.0.0.1:9200/.marvel-$(date +%Y.%m.%d)/_search?pretty=true&q=_exists_:$field&size=1&fields=$field" -d '{ "sort": [ { "@timestamp": { "order": "desc" } } ]}'|grep $field|awk '{print $4}'
UserParameter=elastic.jvm.heap_used_percent,field=jvm.mem.heap_used_percent;curl -sXGET "http://127.0.0.1:9200/.marvel-$(date +%Y.%m.%d)/_search?pretty=true&q=_exists_:$field&size=1&fields=$field" -d '{ "sort": [ { "@timestamp": { "order": "desc" } } ]}'|grep $field|awk '{print $4}'
UserParameter=elastic.indexing.request_rate,field=primaries.indexing.index_total;curl -sXGET "http://127.0.0.1:9200/.marvel-$(date +%Y.%m.%d)/_search?pretty=true&q=_exists_:$field&size=1&fields=$field" -d '{ "sort": [ { "@timestamp": { "order": "desc" } } ]}'|grep $field|awk '{print $4}'
UserParameter=elastic.search.request_rate,field=total.search.query_total;curl -sXGET "http://127.0.0.1:9200/.marvel-$(date +%Y.%m.%d)/_search?pretty=true&q=_exists_:$field&size=1&fields=$field" -d '{ "sort": [ { "@timestamp": { "order": "desc" } } ]}'|grep $field|awk '{print $4}'
UserParameter=elastic.document.count,field=primaries.docs.count;curl -sXGET "http://127.0.0.1:9200/.marvel-$(date +%Y.%m.%d)/_search?pretty=true&q=_exists_:$field&size=1&fields=$field" -d '{ "sort": [ { "@timestamp": { "order": "desc" } } ]}'|grep $field|awk '{print $4}'
